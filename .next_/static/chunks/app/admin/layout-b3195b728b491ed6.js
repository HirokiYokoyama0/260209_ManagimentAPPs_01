(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7581],{1452:(e,t,i)=>{"use strict";i.d(t,{AdminLayoutClient:()=>g});var s=i(5155),n=i(2115),a=i(2619),r=i.n(a),d=i(63),o=i(5239),l=i(5229),c=i(9540),h=i(508),x=i(7003),m=i(9103);function u(){let e=(0,d.usePathname)(),[t,i]=(0,n.useState)(!1),[a,u]=(0,n.useState)(null),g=(0,m.t)(),f="/admin/login"===e;(0,n.useEffect)(()=>{f||fetch("/api/auth/me").then(e=>e.json()).then(e=>{e.staff&&u(e.staff)}).catch(()=>{})},[f]);let b=e.startsWith("/admin/analysis"),w=e.startsWith("/admin/broadcast"),p=e.startsWith("/admin/reward-exchanges"),v=e.startsWith("/admin/qr"),y=e.startsWith("/admin/activity-logs"),k=e.startsWith("/admin/user-logs");return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("header",{className:"border-b border-slate-200 bg-gradient-to-r from-sky-600 via-sky-500 to-cyan-500 text-white shadow-sm",children:[(0,s.jsxs)("div",{className:"container flex h-16 items-center justify-between px-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 md:gap-3",children:[(0,s.jsx)("div",{role:f?"button":void 0,tabIndex:f?0:void 0,onClick:f?()=>null==g?void 0:g.revealSignup():void 0,onKeyDown:f?e=>{("Enter"===e.key||" "===e.key)&&(null==g||g.revealSignup())}:void 0,className:"relative h-10 w-10 md:h-12 md:w-12 rounded-full bg-white shadow-sm overflow-hidden flex-shrink-0 ".concat(f?"cursor-pointer hover:ring-2 hover:ring-white/50 focus:outline-none focus:ring-2 focus:ring-white":""),children:(0,s.jsx)(o.default,{src:"/images/haburashiika-icon.png",alt:"ハブラシーカ",fill:!0,className:"object-cover",priority:!0})}),(0,s.jsxs)("div",{className:"flex flex-col leading-tight",children:[(0,s.jsx)("span",{className:"hidden md:block text-sm font-semibold tracking-wide",children:"つくばホワイト歯科 管理ダッシュボード"}),(0,s.jsx)("span",{className:"block md:hidden text-xs font-semibold tracking-wide",children:"つくばホワイト歯科"}),!f&&(0,s.jsx)("span",{className:"hidden md:block text-[11px] text-sky-50/90",children:"患者一覧・スタンプ・メッセージ・一斉配信・特典交換をまとめて管理"})]})]}),!f&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(x.$,{variant:"ghost",size:"icon",className:"md:hidden text-white hover:bg-white/30 bg-white/10 h-11 w-11 rounded-lg shadow-sm",onClick:()=>i(!t),children:t?(0,s.jsx)(l.A,{className:"h-6 w-6"}):(0,s.jsx)(c.A,{className:"h-6 w-6"})}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("nav",{className:"hidden md:flex items-center gap-3 text-sm",children:[(0,s.jsxs)(r(),{href:"/admin",className:"inline-flex items-center gap-1 rounded-full px-3 py-1 text-xs font-medium transition ".concat(b||w||p||v||y||k?"bg-white/5 text-sky-50/80 hover:bg-white/10":"bg-white/20 text-white shadow-sm"),children:["患者一覧",!b&&!w&&!p&&!v&&!y&&!k&&(0,s.jsx)("span",{className:"h-1.5 w-1.5 rounded-full bg-emerald-300"})]}),(0,s.jsx)(r(),{href:"/admin/analysis",className:"inline-flex items-center gap-1 rounded-full px-3 py-1 text-xs font-medium transition ".concat(b?"bg-white/20 text-white shadow-sm":"bg-white/5 text-sky-50/80 hover:bg-white/10"),children:"分析"}),(0,s.jsx)(r(),{href:"/admin/broadcast",className:"inline-flex items-center gap-1 rounded-full px-3 py-1 text-xs font-medium transition ".concat(w?"bg-white/20 text-white shadow-sm":"bg-white/5 text-sky-50/80 hover:bg-white/10"),children:"一斉配信"}),(0,s.jsx)(r(),{href:"/admin/reward-exchanges",className:"inline-flex items-center gap-1 rounded-full px-3 py-1 text-xs font-medium transition ".concat(p?"bg-white/20 text-white shadow-sm":"bg-white/5 text-sky-50/80 hover:bg-white/10"),children:"特典交換"}),(0,s.jsx)(r(),{href:"/admin/qr",className:"inline-flex items-center gap-1 rounded-full px-3 py-1 text-xs font-medium transition ".concat(v?"bg-white/20 text-white shadow-sm":"bg-white/5 text-sky-50/80 hover:bg-white/10"),children:"テストQR"}),(0,s.jsx)(r(),{href:"/admin/activity-logs",className:"inline-flex items-center gap-1 rounded-full px-3 py-1 text-xs font-medium transition ".concat(y?"bg-white/20 text-white shadow-sm":"bg-white/5 text-sky-50/80 hover:bg-white/10"),children:"スタッフ操作ログ"}),(0,s.jsx)(r(),{href:"/admin/user-logs",className:"inline-flex items-center gap-1 rounded-full px-3 py-1 text-xs font-medium transition ".concat(k?"bg-white/20 text-white shadow-sm":"bg-white/5 text-sky-50/80 hover:bg-white/10"),children:"ユーザログ"}),(0,s.jsx)(r(),{href:"/admin/change-password",className:"inline-flex items-center rounded-full px-3 py-1 text-xs font-medium text-white/90 hover:bg-white/10",children:"パスワード変更"})]}),a&&(0,s.jsxs)("span",{className:"hidden md:inline-flex items-center gap-1.5 rounded-full bg-white/10 px-3 py-1.5 text-xs text-white/95",children:[(0,s.jsx)(h.A,{className:"h-3.5 w-3.5"}),a.display_name||a.login_id," でログイン中"]}),(0,s.jsx)("form",{action:"/api/auth/logout",method:"post",children:(0,s.jsx)("button",{type:"submit",className:"inline-flex items-center rounded-full border border-white/30 bg-white/10 px-3 py-1.5 text-xs font-medium text-white shadow-sm hover:bg-white/20",children:"ログアウト"})})]})]})]}),!f&&t&&(0,s.jsxs)("div",{className:"md:hidden border-t border-white/20 bg-sky-600",children:[a&&(0,s.jsxs)("div",{className:"container px-4 py-2 flex items-center gap-2 text-xs text-white/90 border-b border-white/10",children:[(0,s.jsx)(h.A,{className:"h-4 w-4 flex-shrink-0"}),(0,s.jsxs)("span",{children:[a.display_name||a.login_id," でログイン中"]})]}),(0,s.jsxs)("nav",{className:"container px-4 py-3 space-y-1",children:[(0,s.jsx)(r(),{href:"/admin",onClick:()=>i(!1),className:"block rounded-lg px-4 py-2.5 text-sm font-medium transition ".concat(b||w||p||v||y||k?"text-sky-50 hover:bg-white/10":"bg-white/20 text-white"),children:"患者一覧"}),(0,s.jsx)(r(),{href:"/admin/analysis",onClick:()=>i(!1),className:"block rounded-lg px-4 py-2.5 text-sm font-medium transition ".concat(b?"bg-white/20 text-white":"text-sky-50 hover:bg-white/10"),children:"分析"}),(0,s.jsx)(r(),{href:"/admin/broadcast",onClick:()=>i(!1),className:"block rounded-lg px-4 py-2.5 text-sm font-medium transition ".concat(w?"bg-white/20 text-white":"text-sky-50 hover:bg-white/10"),children:"一斉配信"}),(0,s.jsx)(r(),{href:"/admin/reward-exchanges",onClick:()=>i(!1),className:"block rounded-lg px-4 py-2.5 text-sm font-medium transition ".concat(p?"bg-white/20 text-white":"text-sky-50 hover:bg-white/10"),children:"特典交換"}),(0,s.jsx)(r(),{href:"/admin/qr",onClick:()=>i(!1),className:"block rounded-lg px-4 py-2.5 text-sm font-medium transition ".concat(v?"bg-white/20 text-white":"text-sky-50 hover:bg-white/10"),children:"テストQR"}),(0,s.jsx)(r(),{href:"/admin/activity-logs",onClick:()=>i(!1),className:"block rounded-lg px-4 py-2.5 text-sm font-medium transition ".concat(y?"bg-white/20 text-white":"text-sky-50 hover:bg-white/10"),children:"スタッフ操作ログ"}),(0,s.jsx)(r(),{href:"/admin/user-logs",onClick:()=>i(!1),className:"block rounded-lg px-4 py-2.5 text-sm font-medium transition ".concat(k?"bg-white/20 text-white":"text-sky-50 hover:bg-white/10"),children:"ユーザログ"}),(0,s.jsx)(r(),{href:"/admin/change-password",onClick:()=>i(!1),className:"block rounded-lg px-4 py-2.5 text-sm font-medium text-sky-50 hover:bg-white/10",children:"パスワード変更"})]})]})]})})}function g(e){let{children:t}=e;return(0,s.jsx)(m.b,{children:(0,s.jsxs)("div",{className:"min-h-screen bg-slate-50",children:[(0,s.jsx)(u,{}),(0,s.jsx)("main",{className:"container py-8 px-4",children:(0,s.jsx)("div",{className:"rounded-2xl bg-white/80 p-6 shadow-md ring-1 ring-slate-100",children:t})})]})})}},5016:(e,t,i)=>{"use strict";i.d(t,{cn:()=>a});var s=i(2821),n=i(5889);function a(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return(0,n.QP)((0,s.$)(t))}},7003:(e,t,i)=>{"use strict";i.d(t,{$:()=>l});var s=i(5155),n=i(2115),a=i(2467),r=i(3101),d=i(5016);let o=(0,r.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=n.forwardRef((e,t)=>{let{className:i,variant:n,size:r,asChild:l=!1,...c}=e,h=l?a.DX:"button";return(0,s.jsx)(h,{className:(0,d.cn)(o({variant:n,size:r,className:i})),ref:t,...c})});l.displayName="Button"},9103:(e,t,i)=>{"use strict";i.d(t,{b:()=>r,t:()=>d});var s=i(5155),n=i(2115);let a=(0,n.createContext)(null);function r(e){let{children:t}=e,[i,r]=(0,n.useState)(0),[d,o]=(0,n.useState)(!1),l=(0,n.useCallback)(()=>{r(e=>{let t=e+1;return t>=3&&o(!0),t})},[]);return(0,s.jsx)(a.Provider,{value:{signupRevealed:d,revealSignup:l},children:t})}function d(){return(0,n.useContext)(a)}},9178:(e,t,i)=>{Promise.resolve().then(i.bind(i,1452))}},e=>{e.O(0,[5707,2619,1270,8441,1255,7358],()=>e(e.s=9178)),_N_E=e.O()}]);