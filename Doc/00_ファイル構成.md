# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

ã¤ãã°ãƒ›ãƒ¯ã‚¤ãƒˆæ­¯ç§‘ ç®¡ç†ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å…¨ä½“çš„ãªãƒ•ã‚¡ã‚¤ãƒ«ãƒ»ãƒ•ã‚©ãƒ«ãƒ€æ§‹æˆã‚’èª¬æ˜ã—ã¾ã™ã€‚

---

## ğŸ“‚ ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
260209_ManagimentAPPs_01/
â”œâ”€â”€ .git/                         # Gitç®¡ç†ãƒ•ã‚©ãƒ«ãƒ€
â”œâ”€â”€ .next/                        # Next.jsãƒ“ãƒ«ãƒ‰å‡ºåŠ›ï¼ˆè‡ªå‹•ç”Ÿæˆï¼‰
â”œâ”€â”€ node_modules/                 # ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ï¼ˆè‡ªå‹•ç”Ÿæˆï¼‰
â”œâ”€â”€ app/                          # Next.js App Routerã®ãƒšãƒ¼ã‚¸ãƒ»API
â”œâ”€â”€ components/                   # Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”œâ”€â”€ lib/                          # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ»å‹å®šç¾©
â”œâ”€â”€ supabase/                     # Supabaseãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©SQL
â”œâ”€â”€ test/                         # ãƒ†ã‚¹ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”œâ”€â”€ Doc/                          # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼ˆä»•æ§˜æ›¸ãƒ»æ‰‹é †æ›¸ï¼‰
â”œâ”€â”€ .env.local                    # ç’°å¢ƒå¤‰æ•°ï¼ˆGitç®¡ç†å¤–ï¼‰
â”œâ”€â”€ .env.example                  # ç’°å¢ƒå¤‰æ•°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â”œâ”€â”€ .gitignore                    # Gité™¤å¤–è¨­å®š
â”œâ”€â”€ middleware.ts                 # Next.jsãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ï¼ˆèªè¨¼ï¼‰
â”œâ”€â”€ next.config.ts                # Next.jsè¨­å®š
â”œâ”€â”€ package.json                  # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šãƒ»ä¾å­˜é–¢ä¿‚
â”œâ”€â”€ package-lock.json             # ä¾å­˜é–¢ä¿‚ãƒ­ãƒƒã‚¯ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ postcss.config.mjs            # PostCSSè¨­å®š
â”œâ”€â”€ tailwind.config.ts            # Tailwind CSSè¨­å®š
â””â”€â”€ tsconfig.json                 # TypeScriptè¨­å®š
```

---

## ğŸ“ ä¸»è¦ãƒ•ã‚©ãƒ«ãƒ€ã®è©³ç´°èª¬æ˜

### 1. `app/` - ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ã‚¢

Next.js 15 App Routerã‚’ä½¿ç”¨ã—ãŸç”»é¢ãƒ»APIå®šç¾©ã€‚

```
app/
â”œâ”€â”€ layout.tsx                    # ãƒ«ãƒ¼ãƒˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”œâ”€â”€ page.tsx                      # ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ï¼ˆ/ï¼‰
â”œâ”€â”€ globals.css                   # ã‚°ãƒ­ãƒ¼ãƒãƒ«CSS
â”œâ”€â”€ admin/                        # ç®¡ç†ç”»é¢é–¢é€£
â”‚   â”œâ”€â”€ layout.tsx                # ç®¡ç†ç”»é¢ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚   â”œâ”€â”€ page.tsx                  # æ‚£è€…ä¸€è¦§ç”»é¢ï¼ˆ/adminï¼‰
â”‚   â”œâ”€â”€ login/
â”‚   â”‚   â””â”€â”€ page.tsx              # ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ï¼ˆ/admin/loginï¼‰
â”‚   â”œâ”€â”€ analysis/
â”‚   â”‚   â””â”€â”€ page.tsx              # åˆ†æç”»é¢ï¼ˆ/admin/analysisï¼‰
â”‚   â”œâ”€â”€ broadcast/
â”‚   â”‚   â””â”€â”€ page.tsx              # ä¸€æ–‰é…ä¿¡ç”»é¢ï¼ˆ/admin/broadcastï¼‰
â”‚   â””â”€â”€ reward-exchanges/
â”‚       â””â”€â”€ page.tsx              # ç‰¹å…¸äº¤æ›å±¥æ­´ç”»é¢ï¼ˆ/admin/reward-exchangesï¼‰
â””â”€â”€ api/                          # APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
    â”œâ”€â”€ auth/
    â”‚   â”œâ”€â”€ login/
    â”‚   â”‚   â””â”€â”€ route.ts          # ãƒ­ã‚°ã‚¤ãƒ³API
    â”‚   â””â”€â”€ logout/
    â”‚       â””â”€â”€ route.ts          # ãƒ­ã‚°ã‚¢ã‚¦ãƒˆAPI
    â”œâ”€â”€ broadcast/
    â”‚   â”œâ”€â”€ preview/
    â”‚   â”‚   â””â”€â”€ route.ts          # ä¸€æ–‰é…ä¿¡ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼API
    â”‚   â”œâ”€â”€ send/
    â”‚   â”‚   â””â”€â”€ route.ts          # ä¸€æ–‰é…ä¿¡é€ä¿¡API
    â”‚   â””â”€â”€ logs/
    â”‚       â””â”€â”€ route.ts          # é…ä¿¡å±¥æ­´å–å¾—API
    â”œâ”€â”€ reward-exchanges/
    â”‚   â”œâ”€â”€ route.ts              # ç‰¹å…¸äº¤æ›ä¸€è¦§å–å¾—API
    â”‚   â””â”€â”€ [id]/
    â”‚       â”œâ”€â”€ complete/
    â”‚       â”‚   â””â”€â”€ route.ts      # å¼•ãæ¸¡ã—å®Œäº†API
    â”‚       â”œâ”€â”€ cancel/
    â”‚       â”‚   â””â”€â”€ route.ts      # ã‚­ãƒ£ãƒ³ã‚»ãƒ«API
    â”‚       â””â”€â”€ delete/
    â”‚           â””â”€â”€ route.ts      # å‰Šé™¤API
    â””â”€â”€ profiles/
        â”œâ”€â”€ route.ts              # æ‚£è€…ä¸€è¦§å–å¾—API
        â””â”€â”€ [id]/
            â”œâ”€â”€ route.ts          # æ‚£è€…æƒ…å ±æ›´æ–°API
            â”œâ”€â”€ stamp/
            â”‚   â””â”€â”€ route.ts      # ã‚¹ã‚¿ãƒ³ãƒ—å¢—åŠ APIï¼ˆ+1ã®ã¿ï¼‰
            â”œâ”€â”€ stamp-set/
            â”‚   â””â”€â”€ route.ts      # ã‚¹ã‚¿ãƒ³ãƒ—ç›´æ¥è¨­å®šAPI
            â””â”€â”€ care-messages/
                â””â”€â”€ route.ts      # ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ãƒ»å–å¾—API
```

#### å½¹å‰²åˆ¥èª¬æ˜

| ãƒ•ã‚¡ã‚¤ãƒ« | å½¹å‰² | ä¸»ãªæ©Ÿèƒ½ |
|---------|------|---------|
| `app/page.tsx` | ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ | ã€Œç®¡ç†ç”»é¢ã¸ã€ãƒœã‚¿ãƒ³è¡¨ç¤º |
| `app/admin/page.tsx` | æ‚£è€…ä¸€è¦§ç”»é¢ | ãƒ¡ã‚¤ãƒ³æ©Ÿèƒ½ï¼ˆæ¤œç´¢ãƒ»ã‚½ãƒ¼ãƒˆãƒ»ç·¨é›†ï¼‰ |
| `app/admin/analysis/page.tsx` | åˆ†æç”»é¢ | ã‚¹ã‚¿ãƒ³ãƒ—åˆ†å¸ƒãƒ»å‹ã ã¡ç‡è¡¨ç¤º |
| `app/admin/login/page.tsx` | ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ | ç®¡ç†è€…èªè¨¼ãƒ•ã‚©ãƒ¼ãƒ  |
| `app/api/profiles/route.ts` | æ‚£è€…ãƒ‡ãƒ¼ã‚¿API | ä¸€è¦§å–å¾— |
| `app/api/profiles/[id]/route.ts` | æ‚£è€…ç·¨é›†API | è¨ºå¯Ÿåˆ¸ç•ªå·ãƒ»æœ€çµ‚æ¥é™¢æ—¥æ›´æ–° |
| `app/api/profiles/[id]/stamp/route.ts` | ã‚¹ã‚¿ãƒ³ãƒ—API | +1ã®å¢—åŠ ã®ã¿ï¼ˆç©ã¿ä¸Šã’å¼ï¼‰ |
| `app/api/profiles/[id]/stamp-set/route.ts` | ã‚¹ã‚¿ãƒ³ãƒ—è¨­å®šAPI | ç›´æ¥æ•°å€¤æŒ‡å®š |
| `app/api/profiles/[id]/care-messages/route.ts` | ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸API | é€ä¿¡ãƒ»å±¥æ­´å–å¾— |

---

### 2. `components/` - UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

å†åˆ©ç”¨å¯èƒ½ãªReactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã€‚

```
components/
â”œâ”€â”€ ui/                           # shadcn/uiã®åŸºæœ¬ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ badge.tsx                 # ãƒãƒƒã‚¸
â”‚   â”œâ”€â”€ button.tsx                # ãƒœã‚¿ãƒ³
â”‚   â”œâ”€â”€ dialog.tsx                # ãƒ€ã‚¤ã‚¢ãƒ­ã‚°
â”‚   â”œâ”€â”€ dropdown-menu.tsx         # ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼
â”‚   â”œâ”€â”€ input.tsx                 # å…¥åŠ›æ¬„
â”‚   â”œâ”€â”€ label.tsx                 # ãƒ©ãƒ™ãƒ«
â”‚   â”œâ”€â”€ separator.tsx             # ã‚»ãƒ‘ãƒ¬ãƒ¼ã‚¿ãƒ¼ï¼ˆåŒºåˆ‡ã‚Šç·šï¼‰
â”‚   â”œâ”€â”€ sheet.tsx                 # ã‚¹ãƒ©ã‚¤ãƒ‰ã‚·ãƒ¼ãƒˆ
â”‚   â”œâ”€â”€ switch.tsx                # ã‚¹ã‚¤ãƒƒãƒ
â”‚   â”œâ”€â”€ tabs.tsx                  # ã‚¿ãƒ–
â”‚   â”œâ”€â”€ table.tsx                 # ãƒ†ãƒ¼ãƒ–ãƒ«
â”‚   â””â”€â”€ textarea.tsx              # ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢
â”œâ”€â”€ admin/                        # ç®¡ç†ç”»é¢å°‚ç”¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ patients-table.tsx        # æ‚£è€…ä¸€è¦§ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆPCãƒ»ã‚¹ãƒãƒ›åˆ‡ã‚Šæ›¿ãˆï¼‰
â”‚   â”œâ”€â”€ message-send-sheet.tsx    # ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ã‚·ãƒ¼ãƒˆï¼ˆãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œï¼‰
â”‚   â””â”€â”€ mobile/                   # ã‚¹ãƒãƒ›å°‚ç”¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚       â”œâ”€â”€ mobile-patient-list.tsx              # æ‚£è€…ä¸€è¦§ã‚«ãƒ¼ãƒ‰ãƒªã‚¹ãƒˆ
â”‚       â”œâ”€â”€ mobile-patient-card.tsx              # æ‚£è€…ã‚«ãƒ¼ãƒ‰1æš
â”‚       â”œâ”€â”€ mobile-patient-actions-menu.tsx      # æ‚£è€…æ“ä½œãƒ¡ãƒ‹ãƒ¥ãƒ¼
â”‚       â”œâ”€â”€ mobile-reward-exchange-list.tsx      # ç‰¹å…¸äº¤æ›ã‚«ãƒ¼ãƒ‰ãƒªã‚¹ãƒˆ
â”‚       â”œâ”€â”€ mobile-reward-exchange-card.tsx      # ç‰¹å…¸äº¤æ›ã‚«ãƒ¼ãƒ‰1æš
â”‚       â””â”€â”€ mobile-reward-exchange-actions.tsx   # ç‰¹å…¸äº¤æ›æ“ä½œãƒœã‚¿ãƒ³
â””â”€â”€ admin-header.tsx              # ç®¡ç†ç”»é¢ãƒ˜ãƒƒãƒ€ãƒ¼ï¼ˆãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼å¯¾å¿œï¼‰
```

#### é‡è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

| ãƒ•ã‚¡ã‚¤ãƒ« | å½¹å‰² | ä¸»ãªæ©Ÿèƒ½ |
|---------|------|---------|
| `components/admin/patients-table.tsx` | æ‚£è€…ä¸€è¦§ãƒ†ãƒ¼ãƒ–ãƒ« | æ¤œç´¢ãƒ»ã‚½ãƒ¼ãƒˆãƒ»ã‚¹ã‚¿ãƒ³ãƒ—æ“ä½œãƒ»ç·¨é›†ãƒ»ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–åˆ‡ã‚Šæ›¿ãˆ |
| `components/admin/message-send-sheet.tsx` | ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚·ãƒ¼ãƒˆ | å®šå‹æ–‡é¸æŠãƒ»è‡ªç”±å…¥åŠ›ãƒ»é€ä¿¡ãƒ»ã‚¹ãƒãƒ›å…¨ç”»é¢å¯¾å¿œ |
| `components/admin/mobile/*.tsx` | ã‚¹ãƒãƒ›å°‚ç”¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | ã‚«ãƒ¼ãƒ‰å½¢å¼UIãƒ»ã‚¿ãƒƒãƒæ“ä½œæœ€é©åŒ– |
| `components/admin-header.tsx` | ãƒ˜ãƒƒãƒ€ãƒ¼ | ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒ»ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ |

---

### 3. `lib/` - ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ»å‹å®šç¾©

å…±é€šå‡¦ç†ã¨å‹å®šç¾©ã€‚

```
lib/
â”œâ”€â”€ supabase.ts                   # Supabaseã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆåˆæœŸåŒ–
â”œâ”€â”€ types.ts                      # TypeScriptå‹å®šç¾©
â”œâ”€â”€ format.ts                     # æ—¥æ™‚ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆé–¢æ•°
â”œâ”€â”€ memo.ts                       # æ¬¡å›æ¥é™¢ãƒ¡ãƒ¢ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â””â”€â”€ utils.ts                      # cn()ãªã©ã®ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
```

#### å½¹å‰²

| ãƒ•ã‚¡ã‚¤ãƒ« | å½¹å‰² |
|---------|------|
| `lib/supabase.ts` | Supabaseã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®åˆæœŸåŒ–ãƒ»è¨­å®š |
| `lib/types.ts` | Profileå‹ãªã©ã®å…±é€šå‹å®šç¾©ï¼ˆæ¬¡å›æ¥é™¢ãƒ¡ãƒ¢å¯¾å¿œï¼‰ |
| `lib/format.ts` | JSTæ—¥æ™‚ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆé–¢æ•° |
| `lib/memo.ts` | æ¬¡å›æ¥é™¢æ—¥ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãƒ»ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³é–¢æ•° |
| `lib/utils.ts` | Tailwind CSSã‚¯ãƒ©ã‚¹çµåˆé–¢æ•° |

---

### 4. `supabase/` - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å®šç¾©

Supabaseãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆç”¨SQLã€‚

```
supabase/
â”œâ”€â”€ 001_create_profiles_table.sql           # profilesãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
â”œâ”€â”€ 002_create_care_messages_table.sql      # care_messagesãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
â”œâ”€â”€ 003_add_is_line_friend_to_profiles.sql  # is_line_friendã‚«ãƒ©ãƒ è¿½åŠ 
â”œâ”€â”€ 004_broadcast_logs.sql                  # broadcast_logsãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆï¼ˆä¸€æ–‰é…ä¿¡å±¥æ­´ï¼‰
â””â”€â”€ 005_reward_exchanges_rls.sql            # reward_exchangesãƒ†ãƒ¼ãƒ–ãƒ«RLSãƒãƒªã‚·ãƒ¼
```

#### å®Ÿè¡Œé †åº

1. `001_create_profiles_table.sql` - æ‚£è€…æƒ…å ±ãƒ†ãƒ¼ãƒ–ãƒ«
2. `002_create_care_messages_table.sql` - ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å±¥æ­´ãƒ†ãƒ¼ãƒ–ãƒ«
3. `003_add_is_line_friend_to_profiles.sql` - å…¬å¼ã‚¢ã‚«å‹ã ã¡ãƒ•ãƒ©ã‚°è¿½åŠ 
4. `004_broadcast_logs.sql` - ä¸€æ–‰é…ä¿¡å±¥æ­´ãƒ†ãƒ¼ãƒ–ãƒ«
5. `005_reward_exchanges_rls.sql` - ç‰¹å…¸äº¤æ›ãƒ†ãƒ¼ãƒ–ãƒ«RLSãƒãƒªã‚·ãƒ¼

è©³ç´°ã¯ [03_Supabaseã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †.md](03_Supabaseã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †.md) ã‚’å‚ç…§ã€‚

---

### 5. `test/` - ãƒ†ã‚¹ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ

é–‹ç™ºç”¨ãƒ†ã‚¹ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆã€‚

```
test/
â”œâ”€â”€ supabase-connection.ts        # Supabaseæ¥ç¶šãƒ†ã‚¹ãƒˆ
â””â”€â”€ check-schema.ts               # ã‚¹ã‚­ãƒ¼ãƒç¢ºèªã‚¹ã‚¯ãƒªãƒ—ãƒˆ
```

#### å®Ÿè¡Œæ–¹æ³•

```bash
# Supabaseæ¥ç¶šãƒ†ã‚¹ãƒˆ
npm run test:supabase

# ã‚¹ã‚­ãƒ¼ãƒç¢ºèª
npm run test:schema
```

---

### 6. `Doc/` - ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã€‚è©³ç´°ã¯ [01_README.md](01_README.md) ã‚’å‚ç…§ã€‚

```
Doc/
â”œâ”€â”€ 00_README.md                            # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ¡ˆå†…
â”œâ”€â”€ 00_ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ.md                      # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ 02_ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ.md                  # èµ·å‹•æ‰‹é †
â”œâ”€â”€ 03_ç®¡ç†ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ä»•æ§˜æ›¸.md          # æ©Ÿèƒ½ä»•æ§˜
â”œâ”€â”€ 04_Supabaseã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †.md          # DBè¨­å®š
â”œâ”€â”€ 05_LINEãƒŸãƒ‹ã‚¢ãƒ—ãƒªä»•æ§˜æ›¸.md              # å°†æ¥å®Ÿè£…äºˆå®š
â”œâ”€â”€ 06_ä¸€æ–‰é…ä¿¡æ©Ÿèƒ½ä»•æ§˜æ›¸.md                # ä¸€æ–‰é…ä¿¡ãƒ»Push Message API
â”œâ”€â”€ 07_æ¬¡å›æ¥é™¢ãƒ¡ãƒ¢æ©Ÿèƒ½_ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ä»•æ§˜æ›¸.md  # æ¬¡å›æ¥é™¢ãƒ¡ãƒ¢æ©Ÿèƒ½
â”œâ”€â”€ 08_ç‰¹å…¸äº¤æ›å±¥æ­´æ©Ÿèƒ½ä»•æ§˜æ›¸.md            # ç‰¹å…¸äº¤æ›ç®¡ç†æ©Ÿèƒ½ï¼ˆæ—§07ï¼‰
â”œâ”€â”€ 09_é‡è¦_ã‚¹ã‚¿ãƒ³ãƒ—ä»•æ§˜_ç©ã¿ä¸Šã’å¼.md      # âš ï¸ ã‚¹ã‚¿ãƒ³ãƒ—ã®é‡è¦ä»•æ§˜ï¼ˆæ—§08ï¼‰
â”œâ”€â”€ 99_å¤‰æ›´å±¥æ­´.md                          # é€²æ—ãƒ»å¤‰æ›´å±¥æ­´
â””â”€â”€ archive/                                # æ—§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
```

---

## ğŸ”§ è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®èª¬æ˜

### ç’°å¢ƒå¤‰æ•°ãƒ•ã‚¡ã‚¤ãƒ«

| ãƒ•ã‚¡ã‚¤ãƒ« | å½¹å‰² | Gitç®¡ç† |
|---------|------|---------|
| `.env.local` | å®Ÿéš›ã®ç’°å¢ƒå¤‰æ•°ï¼ˆSupabaseæ¥ç¶šæƒ…å ±ãƒ»èªè¨¼æƒ…å ±ï¼‰ | âŒ é™¤å¤– |
| `.env.example` | ç’°å¢ƒå¤‰æ•°ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼ˆã‚­ãƒ¼åã®ã¿ï¼‰ | âœ… ç®¡ç† |

### Next.jsé–¢é€£è¨­å®š

| ãƒ•ã‚¡ã‚¤ãƒ« | å½¹å‰² |
|---------|------|
| `next.config.ts` | Next.jsã®è¨­å®šï¼ˆãƒ“ãƒ«ãƒ‰ãƒ»ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ï¼‰ |
| `middleware.ts` | ãƒªã‚¯ã‚¨ã‚¹ãƒˆã”ã¨ã«å®Ÿè¡Œã•ã‚Œã‚‹èªè¨¼å‡¦ç† |
| `tsconfig.json` | TypeScriptã‚³ãƒ³ãƒ‘ã‚¤ãƒ©è¨­å®š |

### ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°é–¢é€£

| ãƒ•ã‚¡ã‚¤ãƒ« | å½¹å‰² |
|---------|------|
| `tailwind.config.ts` | Tailwind CSSã®è¨­å®šï¼ˆã‚«ãƒ©ãƒ¼ãƒ»ãƒ†ãƒ¼ãƒï¼‰ |
| `postcss.config.mjs` | PostCSSè¨­å®šï¼ˆCSSãƒ—ãƒªãƒ—ãƒ­ã‚»ãƒƒã‚µï¼‰ |
| `app/globals.css` | ã‚°ãƒ­ãƒ¼ãƒãƒ«CSSï¼ˆTailwindã‚¤ãƒ³ãƒãƒ¼ãƒˆï¼‰ |

### ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†

| ãƒ•ã‚¡ã‚¤ãƒ« | å½¹å‰² |
|---------|------|
| `package.json` | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šãƒ»ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒªã‚¹ãƒˆ |
| `package-lock.json` | ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãƒ­ãƒƒã‚¯ |

---

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

### 1. ãƒšãƒ¼ã‚¸è¡¨ç¤ºã®æµã‚Œ

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼
  â†“ ã‚¢ã‚¯ã‚»ã‚¹
middleware.tsï¼ˆèªè¨¼ãƒã‚§ãƒƒã‚¯ï¼‰
  â†“ èªè¨¼OK
app/admin/page.tsx
  â†“ ãƒ‡ãƒ¼ã‚¿å–å¾—
components/admin/patients-table.tsxï¼ˆSWRä½¿ç”¨ï¼‰
  â†“ APIå‘¼ã³å‡ºã—
app/api/profiles/route.ts
  â†“ DBæ¥ç¶š
Supabaseï¼ˆprofiles ãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰
  â†“ ãƒ‡ãƒ¼ã‚¿è¿”å´
ç”»é¢ã«è¡¨ç¤º
```

### 2. ã‚¹ã‚¿ãƒ³ãƒ—æ›´æ–°ã®æµã‚Œ

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼ˆ+1ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ï¼‰
  â†“
components/admin/patients-table.tsx
  â†“ APIå‘¼ã³å‡ºã—
app/api/profiles/[id]/stamp/route.ts
  â†“ DBæ›´æ–°
Supabaseï¼ˆprofiles ãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰
  â†“ æ›´æ–°æˆåŠŸ
SWR mutateï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥æ›´æ–°ï¼‰
  â†“
ç”»é¢ã«å³åº§ã«åæ˜ 
```

### 3. ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ã®æµã‚Œ

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼ˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ï¼‰
  â†“
components/admin/message-send-sheet.tsxï¼ˆSheetã‚’é–‹ãï¼‰
  â†“ å®šå‹æ–‡é¸æŠï¼‹è‡ªç”±å…¥åŠ›
  â†“ é€ä¿¡ãƒœã‚¿ãƒ³
app/api/profiles/[id]/care-messages/route.ts
  â†“ â‘ DBä¿å­˜
Supabaseï¼ˆcare_messages ãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰
  â†“ â‘¡LINEé€ä¿¡
LINE Messaging API
  â†“ å®Œäº†
ã‚·ãƒ¼ãƒˆã‚’é–‰ã˜ã‚‹
```

---

## ğŸš« Gitç®¡ç†å¤–ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ.gitignoreï¼‰

ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ»ãƒ•ã‚©ãƒ«ãƒ€ã¯Gitã§ç®¡ç†ã•ã‚Œã¾ã›ã‚“ï¼š

```
node_modules/          # ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
.next/                 # ãƒ“ãƒ«ãƒ‰å‡ºåŠ›
.env.local             # ç’°å¢ƒå¤‰æ•°ï¼ˆæ©Ÿå¯†æƒ…å ±ï¼‰
.env*.local            # ç’°å¢ƒå¤‰æ•°ã™ã¹ã¦
```

---

## ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«å‘½åè¦å‰‡

### TypeScriptãƒ•ã‚¡ã‚¤ãƒ«

| ç¨®é¡ | å‘½å | ä¾‹ |
|------|------|-----|
| ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | `page.tsx` | `app/admin/page.tsx` |
| ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | `layout.tsx` | `app/admin/layout.tsx` |
| APIãƒ«ãƒ¼ãƒˆ | `route.ts` | `app/api/profiles/route.ts` |
| UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | `kebab-case.tsx` | `patients-table.tsx` |

### ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ•ã‚¡ã‚¤ãƒ«

| ç¨®é¡ | å‘½å | ä¾‹ |
|------|------|-----|
| ç•ªå·ä»˜ãä¸»è¦ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ | `00_ã‚¿ã‚¤ãƒˆãƒ«.md` | `01_README.md` |
| ã‚¢ãƒ¼ã‚«ã‚¤ãƒ– | å…ƒã®ãƒ•ã‚¡ã‚¤ãƒ«åç¶­æŒ | `Supabase_Setup.md` |

---

## ğŸ” é‡è¦ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¯ã‚¤ãƒƒã‚¯ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹

### ã™ãã«ç¢ºèªã™ã¹ããƒ•ã‚¡ã‚¤ãƒ«

| ç›®çš„ | ãƒ•ã‚¡ã‚¤ãƒ« |
|------|---------|
| èµ·å‹•æ–¹æ³•ã‚’çŸ¥ã‚ŠãŸã„ | [Doc/02_ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ.md](02_ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ.md) |
| æ©Ÿèƒ½ä»•æ§˜ã‚’çŸ¥ã‚ŠãŸã„ | [Doc/03_ç®¡ç†ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ä»•æ§˜æ›¸.md](03_ç®¡ç†ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ä»•æ§˜æ›¸.md) |
| DBè¨­å®šã‚’ã—ãŸã„ | [Doc/04_Supabaseã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †.md](04_Supabaseã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †.md) |
| å®Ÿè£…å±¥æ­´ã‚’è¦‹ãŸã„ | [Doc/99_å¤‰æ›´å±¥æ­´.md](99_å¤‰æ›´å±¥æ­´.md) |
| æ‚£è€…ä¸€è¦§ã®å®Ÿè£…ã‚’è¦‹ãŸã„ | [components/admin/patients-table.tsx](../components/admin/patients-table.tsx) |
| èªè¨¼å‡¦ç†ã‚’è¦‹ãŸã„ | [middleware.ts](../middleware.ts) |
| å‹å®šç¾©ã‚’è¦‹ãŸã„ | [lib/types.ts](../lib/types.ts) |

---

## ğŸ“¦ ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ï¼ˆä¸»è¦ãªã‚‚ã®ï¼‰

### ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãƒ»ãƒ©ã‚¤ãƒ–ãƒ©ãƒª

| ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ | ç”¨é€” |
|-----------|------|
| `next` | Next.jsãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ |
| `react` / `react-dom` | Reactãƒ©ã‚¤ãƒ–ãƒ©ãƒª |
| `typescript` | TypeScriptè¨€èª |

### UIãƒ»ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°

| ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ | ç”¨é€” |
|-----------|------|
| `tailwindcss` | Tailwind CSSãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ |
| `@radix-ui/react-dialog` | ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ |
| `@radix-ui/react-dropdown-menu` | ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ |
| `@radix-ui/react-separator` | ã‚»ãƒ‘ãƒ¬ãƒ¼ã‚¿ãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ |
| `@radix-ui/react-switch` | ã‚¹ã‚¤ãƒƒãƒã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ |
| `@radix-ui/react-tabs` | ã‚¿ãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ |
| `lucide-react` | ã‚¢ã‚¤ã‚³ãƒ³ãƒ©ã‚¤ãƒ–ãƒ©ãƒª |
| `class-variance-authority` | ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒãƒªã‚¢ãƒ³ãƒˆç®¡ç† |
| `clsx` / `tailwind-merge` | CSSã‚¯ãƒ©ã‚¹ã®æ¡ä»¶ä»˜ãçµåˆ |

### ãƒ‡ãƒ¼ã‚¿ç®¡ç†

| ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ | ç”¨é€” |
|-----------|------|
| `@supabase/supabase-js` | Supabaseã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ |
| `@supabase/ssr` | Supabase SSRå¯¾å¿œ |
| `swr` | ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒãƒ³ã‚°ãƒ»ã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚° |

---

æœ€çµ‚æ›´æ–°: 2026-02-14
