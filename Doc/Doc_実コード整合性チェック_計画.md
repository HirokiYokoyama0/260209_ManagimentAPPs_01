# Doc と実コード整合性チェック 計画

**作成日:** 2026-02-24  
**目的:** Doc 内の .md 仕様書と実際のコードの不一致を段階的に洗い出し、修正・追記の優先度を付ける。

---

## チェックの進め方

1. **計画** … 本ファイルで Phase を定義し、対象 Doc・実コードの範囲を明示する。
2. **段階的実施** … Phase 1 → 2 → … の順に、Doc の記述と実ファイル・実装を照合する。
3. **結果の記録** … 不整合は [Doc_実コード整合性チェック結果.md](Doc_実コード整合性チェック結果.md) に「Phase N」として追記し、対応案を記載する。
4. **必要に応じて Doc 更新** … 誤記・リンク修正はその都度、仕様判断が必要な項目は一覧化してから対応する。

---

## Phase 一覧

| Phase | 対象 Doc | 照合対象（実コード） | 主な確認内容 |
|-------|----------|----------------------|--------------|
| **1** | 00_ファイル構成.md | app/, components/, lib/, supabase/ の実ファイル一覧 | 記載漏れ・ファイル名相違・ディレクトリ構成の差異 |
| **2** | 03_管理ダッシュボード仕様書.md | 画面ルート・API・機能 | 画面・ルート一覧、スタンプ -1/+1、認証・API パスの一致 |
| **3** | 05_Database_Schema.md | supabase/*.sql, lib/types.ts | テーブル・ビュー・マイグレーション番号、型定義との対応 |
| **4** | 86, 88, 89（アンケート仕様・計画・Phase4） | app/admin/surveys/, app/api/surveys/ | 画面・API・配信対象・集計・CSV の仕様一致 |
| **5** | 06 一斉配信, 07 特典・次回来院, 08 予約ボタン, 21 家族, 84 イベントログ 等 | 該当 app/api・components・画面 | 各機能の仕様と実装の一致 |

---

## 参照する Doc 一覧（仕様関連）

| 番号 | ファイル名 | 役割 |
|------|------------|------|
| 00 | 00_ファイル構成.md | プロジェクト全体のファイル・フォルダ構成 |
| 00 | 00_README.md | Doc 案内 |
| 03 | 03_管理ダッシュボード仕様書.md | 管理画面の機能・画面・API 仕様 |
| 05 | 05_Database_Schema.md | DB スキーマ・テーブル・マイグレーション |
| 06 | 06_一斉配信機能仕様書.md / シンプル版 | 一斉配信の仕様 |
| 07 | 07_特典交換履歴機能仕様書.md | 特典交換管理 |
| 07 | 07_次回来院メモ機能_ダッシュボード仕様書.md | 次回来院メモ |
| 08 | 08_予約ボタンクリック計測機能.md | 予約ボタン計測 |
| 08 | 08_重要_スタンプ仕様_積み上げ式.md | スタンプ仕様（積み上げ） |
| 21 | 21_家族ひもづけ機能_管理ダッシュボード仕様書.md | 家族機能 |
| 84 | 84_イベントログ仕様_管理ダッシュボード開発者向け.md | イベントログ |
| 86 | 86_アンケート機能仕様検討_ダッシュボード側.md | アンケート画面・API 仕様 |
| 88 | 88_アンケート機能_ダッシュボード開発計画.md | アンケート開発 Phase・成果物 |
| 89 | 89_アンケート機能_Phase4_集計・一覧仕様.md | Phase4 集計・一覧・配信設定 |

---

## 実施ログ

| 日付 | Phase | 実施内容 | 結果ファイル |
|------|-------|----------|--------------|
| 2026-02-24 | 計画 | 本計画の作成、Phase 1 実施開始 | 本ファイル + チェック結果 Phase 1 |

---

最終更新: 2026-02-24
