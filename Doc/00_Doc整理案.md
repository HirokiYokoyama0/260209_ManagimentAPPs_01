# Doc フォルダ .md ファイル整理案

**作成日:** 2026-02-22  
**目的:** 重複解消・不要候補の整理・番号付与の統一

---

## 1. 現状の課題

### 1.1 番号の重複（複数ファイルが同じ番号）

| 現在の番号 | ファイル名 | 内容 |
|-----------|------------|------|
| **05** | 05_Database_Schema.md | DB スキーマ全体 |
| **05** | 05_LINEミニアプリ仕様書.md | 将来実装の LIFF 仕様 |
| **06** | 06_一斉配信機能仕様書.md | 一斉配信の詳細仕様 |
| **06** | 06_一斉配信機能仕様書_シンプル版.md | Phase1 シンプル版 |
| **07** | 07_特典交換履歴機能仕様書.md | 特典交換機能 |
| **07** | 07_次回来院メモ機能_ダッシュボード仕様書.md | 次回来院メモ機能 |
| **08** | 08_予約ボタンクリック計測機能.md | 予約クリック計測仕様 |
| **08** | 08_重要_スタンプ仕様_積み上げ式.md | スタンプ積み上げの重要仕様 |

※ **101** の2ファイル（LIFF向け・開発者向け伝達事項）は **削除済み**。要点（担当の分け方・優先度）は **08_予約ボタンクリック計測機能.md** に統合済み。

### 1.2 22・23 あたり（マイグレーション関連）

| ファイル | 内容 | 性質 |
|----------|------|------|
| **22_008マイグレーション実行前チェックリスト.md** | `008_add_10x_system_columns.sql` 実行前の確認用 | 特定マイグレーション用・実行後は参照頻度低い |
| **23_009マイグレーション型整合性検証.md** | `009_add_family_support.sql` の型検証レポート | 同上・検証完了後は履歴的価値 |

**提案:**  
- どちらも「一度実行・検証が終わったら」日常的にはあまり開かないドキュメント。  
- **案A:** `archive/migrations/` に移動して「実行済みマイグレーション資料」として保管。  
- **案B:** 番号を 30 番台にまとめ、ルートに残す（例: 30_008マイグレーション実行前チェックリスト、31_009マイグレーション型整合性検証）。

### 1.3 重複・統合候補

- **06 一斉配信**: 「詳細版」と「シンプル版」は**両方残す**価値あり（詳細＝設計参照、シンプル＝実装 Phase1 用）。番号だけ分ける（例: 08 と 09）。
- **101 予約クリック計測**: 2ファイルとも**削除済み**。重要事項（担当分け・優先度）は **08_予約ボタンクリック計測機能.md** に追記済み。

### 1.4 番号なし

- **実行コマンド.md** … クイックスタートや 00_README と並ぶ「よく使う手順」なので、番号付与を推奨（例: **02b** や **17_実行コマンド**）。

---

## 2. 番号付与のルール案

| 番号帯 | 用途 |
|--------|------|
| **00–04** | 案内・構成・クイックスタート・セットアップ |
| **05–19** | 機能別仕様書（DB、スタンプ、一斉配信、特典、次回来院、予約計測、家族ひもづけ、伝達事項など） |
| **20–29** | 機能拡張・検討（家族ひもづけ検討など）※ 20–21 は現状のままでも可 |
| **30–39** | 運用・マイグレーション関連（22・23 をここに振り直す場合） |
| **99** | 変更履歴 |
| **100** | クライアント向け説明 |

---

## 3. 整理後のファイル一覧案

| 新番号 | 現ファイル名 | 備考 |
|--------|----------------|------|
| 00 | 00_README.md | 変更なし |
| 01 | 00_ファイル構成.md | → **01_ファイル構成.md** にリネーム |
| 02 | 02_クイックスタート.md | 変更なし |
| 03 | 03_管理ダッシュボード仕様書.md | 変更なし |
| 04 | 04_Supabaseセットアップ手順.md | 変更なし |
| 05 | 05_Database_Schema.md | 変更なし（05_LINE を 06 に） |
| 06 | 05_LINEミニアプリ仕様書.md | → **06_LINEミニアプリ仕様書.md** |
| 07 | 08_重要_スタンプ仕様_積み上げ式.md | → **07_重要_スタンプ仕様_積み上げ式.md**（必読のため前に） |
| 08 | 06_一斉配信機能仕様書.md | → **08_一斉配信機能仕様書.md** |
| 09 | 06_一斉配信機能仕様書_シンプル版.md | → **09_一斉配信機能仕様書_シンプル版.md** |
| 10 | 07_特典交換履歴機能仕様書.md | → **10_特典交換履歴機能仕様書.md** |
| 11 | 07_次回来院メモ機能_ダッシュボード仕様書.md | → **11_次回来院メモ機能_ダッシュボード仕様書.md** |
| 12 | 08_予約ボタンクリック計測機能.md | → **12_予約ボタンクリック計測機能.md**（101 の内容は本ファイルに統合済み） |
| 13 | 20_家族ひもづけ仕様検討.md | → **13_家族ひもづけ仕様検討.md** |
| 14 | 21_家族ひもづけ機能_管理ダッシュボード仕様書.md | → **14_家族ひもづけ機能_管理ダッシュボード仕様書.md** |
| 15 | 実行コマンド.md | → **15_実行コマンド.md**（番号付与） |
| （22・23 は archive/migrations/ へ移動済み） | — | — |
| 30 | （案B の場合は 22→30 にリネーム） | 実施済みは archive 移動のため不要 |
| 31 | （案B の場合は 23→31 にリネーム） | 同上 |
| 99 | 99_変更履歴.md | 変更なし |
| 100 | 100_主な機能一覧（クライアント説明用）_管理ダッシュボード.md | 変更なし |

※ **22・23** を **archive/migrations/** に移す場合は、30・31 は作らず、22・23 をそのまま archive へ移動。

---

## 4. 不要・archive 候補の整理

| 対象 | 提案 |
|------|------|
| **22_008マイグレーション実行前チェックリスト** | 008 を実行済みなら **archive/migrations/** へ移動。未実行なら 30 にリネームしてルートに残す。 |
| **23_009マイグレーション型整合性検証** | 009 の検証完了後は **archive/migrations/** へ移動可。参照するときだけ archive を見る形でよい。 |
| **archive 内の既存ファイル** | 手続き_ここから、管理ダッシュボード仕様書などは「統合前の旧版」としてそのまま保管でよい。 |

---

## 5. 実施手順の例

1. **archive サブフォルダ作成（案A の場合）**  
   `Doc/archive/migrations/` を作成し、22 と 23 を移動。
2. **リネーム**  
   上表に従い、`00_ファイル構成.md` → `01_ファイル構成.md`、`05_LINEミニアプリ…` → `06_LINEミニアプリ…` など、一括でリネーム。
3. **00_README.md の更新**  
   ドキュメント一覧・読む順番・フォルダ構成図を、新しい番号に合わせて更新。
4. **相互参照の更新**  
   各 .md 内の「関連: 20_家族…」「03_管理ダッシュボード…」などのリンクを、新番号に合わせて修正。

---

## 6. まとめ

- **重複:** 05 / 06 / 07 / 08 の番号重複を解消し、一意に番号付与。**101** の2ファイルは削除し、要点を **08_予約ボタンクリック計測機能.md** に統合済み。
- **22・23:** **archive/migrations/** へ移動済み。
- **番号付与:** 実行コマンドを **15_実行コマンド.md**（または 17）に。00_ファイル構成を **01_ファイル構成.md** に。
- **archive:** 22・23 は `archive/migrations/` に保管済み。

この案で進めてよければ、次に「00_README の具体的な書き換え文」や「リネーム用のスクリプト案」も出します。

---

## 7. 実ファイルとの照合結果（2026-02-08）

- **Doc 直下の .md**: 実在 19 ファイルと 00_README の「Docフォルダ構成」を照合し、**00_README.md を実ファイル一覧に合わせて更新済み**（00_Doc整理案、05_Database_Schema、06_シンプル版、07_次回来院メモ、08_予約ボタンクリック計測、20・21_家族ひもづけ、100_主な機能一覧、実行コマンド、および archive/migrations を追記）。
- **archive/**: 既存 6 ファイル（Supabase 系・手続き・管理ダッシュボード・LINEミニアプリ等）は変更なし。
- **archive/migrations/**: 22_008マイグレーション実行前チェックリスト、23_009マイグレーション型整合性検証の 2 ファイルが存在することを確認。
- **記載のみで実ファイルなし**: なし（22・23 は archive に移動済みのため、Doc 直下に同名は存在しない）。
- **00_ファイル構成.md**: プロジェクトルート（app/・components/・supabase/ 等）の説明であり、Doc 内の .md 一覧は記載していないため、今回の照合対象外。必要なら別途、コード側のパス整合を確認可。
